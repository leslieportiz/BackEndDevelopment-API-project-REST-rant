"use strict";exports.__esModule=!0;var router=require("express").Router(),models_1=require("../models");app.get("/error",function(e,t){t.render("error404")}),router.get("/",function(e,t){models_1.default.Place.find().then(function(e){t.render("places/index",{places:e})}).catch(function(){})}),router.post("/",function(e,t){e.body.pic||(e.body.pic=void 0),e.body.cuisines||(e.body.cuisines=void 0),e.body.city||(e.body.city=void 0),e.body.state||(e.body.state=void 0),models_1.default.Place.create(e.body).then(function(){t.redirect("/places")}).catch(function(){t.render("error404")})}),router.get("/new",function(e,t){t.render("places/new")}),router.get("/:id",function(e,t){models_1.default.Place.findById(e.params.id).populate("comments").then(function(e){t.render("places/show",{place:e})}).catch(function(){})}),router.put("/:id",function(e,t){e.body.pic||(e.body.pic=void 0),e.body.cuisines||(e.body.cuisines=void 0),e.body.city||(e.body.city=void 0),e.body.state||(e.body.state=void 0),models_1.default.Place.findByIdAndUpdate(e.params.id,e.body).then(function(){t.redirect(""+e.params.id)}).catch(function(){t.render("error404")})}),router.delete("/:id",function(e,t){models_1.default.Place.findByIdAndDelete(e.params.id).then(function(){t.redirect("/places")}).catch(function(){t.render("error404")})}),router.get("/:id/edit",function(e,t){models_1.default.Place.findById(e.params.id).then(function(e){t.render("places/edit",{place:e})}).catch(function(){})}),router.post("/:id/comment",function(n,d){models_1.default.Place.findById(n.params.id).then(function(t){models_1.default.Comment.create(n.body).then(function(e){t.comments.push(e.id),t.save().then(function(){d.redirect("/places/"+n.params.id)})}).catch(function(){d.render("error404")})}).catch(function(){d.render("error404")})}),router.delete("/:id/comment/:commentId",function(e,t){models_1.default.Comment.findByIdAndDelete(e.params.commentId).then(function(){t.redirect("/places/"+e.params.id)}).catch(function(){t.render("error404")})}),router.post("/:id/rant",function(e,t){t.send("GET /places/:id/rant stub")}),router.delete("/:id/rant/:rantId",function(e,t){t.send("GET /places/:id/rant/:rantId stub")}),module.exports=router;
//# sourceMappingURL=places.min.js.map
